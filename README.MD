# ğŸš€ PySpark + Docker + JupyterLab + Bases de Datos

Este proyecto proporciona una configuraciÃ³n inicial para ejecutar **PySpark** en un entorno de **Docker**, accediendo a travÃ©s de **JupyterLab**.
AdemÃ¡s, se incluyen contenedores de **PostgreSQL, SQL Server, MySQL y Oracle Free**, ideales para pruebas de conexiÃ³n y desarrollo de proyectos de Big Data.

---

## ğŸ“‘ Ãndice
- [ğŸš€ PySpark + Docker + JupyterLab + Bases de Datos](#-pyspark--docker--jupyterlab--bases-de-datos)
  - [ğŸ“‘ Ãndice](#-Ã­ndice)
  - [ğŸ“¦ Requisitos previos](#-requisitos-previos)
  - [âš™ï¸ Levantar el entorno](#ï¸-levantar-el-entorno)
  - [ğŸ”‘ Acceso a JupyterLab](#-acceso-a-jupyterlab)
  - [ğŸ—„ï¸ ConexiÃ³n a Bases de Datos (Postgres / SQL Server / MySQL / Oracle)](#ï¸-conexiÃ³n-a-bases-de-datos-postgres--sql-server--mysql--oracle)
    - [ğŸ”¹ Ejemplo: ConexiÃ³n a SQL Server](#-ejemplo-conexiÃ³n-a-sql-server)
    - [ğŸ”¹ Ejemplo: ConexiÃ³n a PostgreSQL](#-ejemplo-conexiÃ³n-a-postgresql)
  - [ğŸ›‘ Detener el entorno](#-detener-el-entorno)

---

## ğŸ“¦ Requisitos previos

AsegÃºrate de tener instalados:

- [ğŸ³ Docker](https://docs.docker.com/get-docker/)
- [âš™ï¸ Docker Compose](https://docs.docker.com/compose/install/)
- [ğŸ Python](https://www.python.org/downloads/)

---

## âš™ï¸ Levantar el entorno

1. Construir la imagen y levantar los servicios:
   ```bash
   docker compose up -d --build
   ```

2. Verificar que los contenedores estÃ©n corriendo:
   ```bash
   docker ps
   ```

---

## ğŸ”‘ Acceso a JupyterLab

1. Obtener la **URL de acceso con token** desde los logs del contenedor:
   ```bash
   docker compose logs pyspark-service | grep -m 1 "http://127.0.0.1" | awk '{print "URL:", $NF}'
   ```

   **Ejemplo de salida:**
   ```bash
   URL: http://127.0.0.1:8888/lab?token=33969378520ae1a4d323fba9917c9565271f1a9c3a2c33f4
   ```

2. Si queremos manejarlo desde VSCode, seguir estos pasos:
   - Crear un nuevo archivo `.ipynb`
   - Hacer clic en **Seleccionar kernel** (arriba a la derecha)
   - Elegir **Servidor de Jupyter existente**
   - Pegar la URL obtenida
   - Seleccionar `Python 3 (ipykernel)`

   âœ… Ahora tu Notebook estarÃ¡ listo para usar PySpark. Se ha dejado un archivo de prueba llamado `pyspark_test.ipynb` para que verifiques que todo funciona correctamente.

3. Alternativamente, puedes acceder a JupyterLab directamente desde tu navegador con la URL obtenida en el paso 1.

---

## ğŸ—„ï¸ ConexiÃ³n a Bases de Datos (Postgres / SQL Server / MySQL / Oracle)

Las claves de conexiÃ³n estÃ¡n configuradas por defecto en el archivo `docker-compose.yml`.

- **SQL Server**
  - Usuario: `sa`
  - Password: `initops2025!`
  - Puerto: `1433`

- **PostgreSQL**
  - Usuario: `user`
  - Password: `initops2025!`
  - Base de datos: `testdb`
  - Puerto: `5432`

- **MySQL**
  - Usuario: `user`
  - Password: `initops2025!`
  - Root Password: `initops2025!`
  - Base de datos: `testdb`
  - Puerto: `3306`

- **Oracle Free (23c)**
  - Usuario administrador: `SYSTEM`
  - Password: `initops2025!`
  - Usuario de aplicaciÃ³n (por defecto): `my_user`
  - Password de aplicaciÃ³n: `initops2025!`
  - **Service Name:** `FREEPDB1`  â† âš ï¸ *ya no se usa el SID `XE`*
  - Puerto: `1521`

### ğŸ”¹ Ejemplo: ConexiÃ³n a SQL Server
![CONEXION SQL SERVER](https://i.imgur.com/gGlIctq.png)

### ğŸ”¹ Ejemplo: ConexiÃ³n a PostgreSQL
![CONEXION POSTGRESQL](https://i.imgur.com/l0uDPIU.png)

---

## ğŸ›‘ Detener el entorno

Para detener los contenedores:
```bash
docker compose down
```
