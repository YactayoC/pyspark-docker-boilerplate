# ğŸš€ PySpark + Docker + JupyterLab

Este proyecto proporciona una configuraciÃ³n inicial para ejecutar **PySpark** en un entorno de **Docker**, accediendo a travÃ©s de **JupyterLab**.
Ideal como base para desarrollar y probar cÃ³digo de **Big Data** con Python.

---

## ğŸ“‘ Ãndice
- [ğŸš€ PySpark + Docker + JupyterLab](#-pyspark--docker--jupyterlab)
  - [ğŸ“‘ Ãndice](#-Ã­ndice)
  - [ğŸ“¦ Requisitos previos](#-requisitos-previos)
  - [âš™ï¸ Levantar el entorno](#ï¸-levantar-el-entorno)
  - [ğŸ”‘ Acceso a JupyterLab](#-acceso-a-jupyterlab)
  - [ğŸ—„ï¸ ConexiÃ³n a Bases de Datos (Postgres / SQL Server)](#ï¸-conexiÃ³n-a-bases-de-datos-postgres--sql-server)
    - [ğŸ”¹ Ejemplo: ConexiÃ³n a SQL Server](#-ejemplo-conexiÃ³n-a-sql-server)
    - [ğŸ”¹ Ejemplo: ConexiÃ³n a PostgreSQL](#-ejemplo-conexiÃ³n-a-postgresql)
  - [ğŸ›‘ Detener el entorno](#-detener-el-entorno)

---

## ğŸ“¦ Requisitos previos

AsegÃºrate de tener instalados:

- [ğŸ³ Docker](https://docs.docker.com/get-docker/)
- [âš™ï¸ Docker Compose](https://docs.docker.com/compose/install/)
- [ğŸ Python](https://www.python.org/downloads/)

---

## âš™ï¸ Levantar el entorno

1. Construir la imagen y levantar los servicios:
   ```bash
   docker compose up -d --build
   ```

2. Verificar que el contenedor estÃ© corriendo:
   ```bash
   docker ps
   ```

---

## ğŸ”‘ Acceso a JupyterLab

1. Obtener la **URL de acceso con token** desde los logs del contenedor:
   ```bash
   docker compose logs pyspark-service | grep -m 1 "http://127.0.0.1" | awk '{print "URL:", $NF}'
   ```

   **Ejemplo de salida:**
   ```bash
   URL: http://127.0.0.1:8888/lab?token=33969378520ae1a4d323fba9917c9565271f1a9c3a2c33f4
   ```

2. Si queremos manejarlo desde VSCode, seguir estos pasos:
   - Crear un nuevo archivo `.ipynb`
   - Hacer clic en **Seleccionar kernel** (arriba a la derecha)
   - Elegir **Servidor de Jupyter existente**
   - Pegar la URL obtenida
   - Seleccionar `Python 3 (ipykernel)`

   âœ… Ahora tu Notebook estarÃ¡ listo para usar PySpark, se ha dejado un archivo de prueba llamado `pyspark_test.ipynb` para que puedas verificar que todo funciona correctamente.

   ![SELECCIONAR KERNEL](https://i.imgur.com/wv9Cm34.png)
   ![SERVIDOR JUPYTER](https://i.imgur.com/bbNr4JD.png)
   ![SERVIDOR URL](https://i.imgur.com/bxUfTR5.png)
   ![INGRESAR NOMBRE](https://i.imgur.com/cctOIzh.png)
   ![SELECCION KERNEL](https://i.imgur.com/S3XE0aV.png)
   ![KERNEL ACTUALIZADO](https://i.imgur.com/8U0Jdbt.png)

3. Alternativamente, puedes acceder a JupyterLab directamente desde tu navegador web con la URL obtenida en el paso 1
---

## ğŸ—„ï¸ ConexiÃ³n a Bases de Datos (Postgres / SQL Server)

Las claves de conexiÃ³n a las bases de datos de SQL Server y PostgreSQL estÃ¡n configuradas por defecto en el archivo de `docker-compose.yml`, por lo que no es necesario modificarlas a menos que desees personalizarlas.

- **SQL Server**
   - SA_PASSWORD: Password123!

- **PostgreSQL**
   - POSTGRES_PASSWORD: password

### ğŸ”¹ Ejemplo: ConexiÃ³n a SQL Server
![CONEXION SQL SERVER](https://i.imgur.com/gGlIctq.png)

### ğŸ”¹ Ejemplo: ConexiÃ³n a PostgreSQL
![CONEXION POSTGRESQL](https://i.imgur.com/l0uDPIU.png)

---

## ğŸ›‘ Detener el entorno

Para detener los contenedores:

```bash
docker compose down
```
